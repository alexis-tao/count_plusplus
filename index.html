<!DOCTYPE html>
<html>
 <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
 <link rel="stylesheet" href="css/style.css">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<head>
	<title>count++</title>
</head>
<body>
	<h1 id = "title">count++;</h1>
	<div class="row">
		<div class ="column">
			<form id = "user_input">
				<textarea id="utext" name = "utext" placeholder="Enter some text! For example, Today I had a very, very, very good day. This happens very happen often and that is very good. I hope tomorrow will also be a good day. Good is the new good. Good people are also good. "></textarea><br>
				<button type="button" id = "enter" name ="enter">Enter</button>
			</form>
		</div>

		<div class ="column">
			<div id = 'settings'>
				<h2 style="color:#43587c">current settings</h2>
				<p id = "max">maximum frequency: 20% of the word count</p>
				<p>words ignoring: I, the, this, are, will</p>
			</div><br><hr>
			<div id = 'result_words'>
				<h2 id = "result_msg" style="color:#43587c"></h2>
				<p id = "words_list"></p> <br>
			</div>
		</div>
	</div>

	<script type ="text/javascript">
		$( "#enter" ).click(function() {
			var value = $("#utext").val();
			var arr = value.split(" ");
			var max_freq = parseInt(0.2*arr.length,0); 
			document.getElementById("max").innerHTML = "maximum frequency: " + max_freq;
			var text = "<ul>";
			var unique  = [];
		

			for (i= 0; i < arr.length ; i++){
				var exist = false;
				for (j = 0 ; j < unique.length; j++) {	
					if (arr[i] == unique[j]) {
						exist = true ;
					}
				} 
				if (exist == false) {
					unique.push(arr[i]);
				}
				
			}
			
			var count = []; 
			count.length = unique.length;

			for (i =0; i < unique.length; i++){
				count[i] = 0;
				for (j = 0 ; j < arr.length; j++) {	
					if (arr[j] == unique[i]) {
						count[i] += 1;
					}
				}
			}

			var num_uniques = unique.length;
			var i = num_uniques - 1;

			while(num_uniques > 0 && i > -1) {
				var word = unique.pop();
				var num = count[i];

				if (num > max_freq) {
					text += "<li>"+ word + " " + num +"</li>"; 
				}
				i--;
			}

			text += "<ul>";
			if (max_freq == 1) {
				document.getElementById("result_msg").innerHTML = "words used more than " + max_freq + 	" time: ";
			}
			else {
				document.getElementById("result_msg").innerHTML = "words used more than " + max_freq + 	" times: ";
			}
			document.getElementById("words_list").innerHTML = text; 
		});
		

	</script>
	</body>
</html> 