<!DOCTYPE html>
<html>
 <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
 <link rel="stylesheet" href="css/style.css">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<head>
	<title>count++</title>
</head>
<body>
	<h1 id = "title">count++</h1>
	<p style="text-align: center">Give us some text and we'll let you know which words are redundant!</p>
	<div class="row">
		<div class ="column">
			<form id = "user_input">
				<textarea id="utext" name = "utext" placeholder="Enter some text! For example, Today I had a very, very, very good day. This happens very happen often and that is very good. I hope tomorrow will also be a good day. Good is the new good. Good people are also good."></textarea><br>
				<button type="button" id = "enter" name ="enter">Enter</button>
			</form>
		</div>

		<div class ="column">
			<div id = 'settings'>
				<h2 style="color:#43587c">current settings</h2>
				<p id = "max">measure of redundancy: 10% of the word count</p>
				<p>words ignoring: I, the, this, are, is, to, of, that, as, for, and</p>
			</div><br><hr>
			<div id = 'result_words'>
				<h2 id = "result_msg" style="color:#43587c">redundant words</h2>
				<table id = "table_result" style="width:100%">
					<tr>
						<th>Words</th>
						<th>Occurences</th>
					</tr>
					<tr><p id = words_list></p></tr>
				</table>
				<br>
			</div>
		</div>
	</div>

	<script type ="text/javascript">
		$( "#enter" ).click(function() {
			//entire text input
			var value = $("#utext").val();
			
			//array of all words
			var arr = value.split(" ");
			
			//maximum frequency is 10% of word count
			var max_freq = parseInt(0.1*arr.length,0); 
			
			document.getElementById("max").innerHTML = "measure of redundancy: " + max_freq;
			
			//clear rows each time enter button is pressed
			var x = document.getElementById("table_result").rows.length;
			for (i = 1; i < x; i++){
				document.getElementById("table_result").deleteRow(i);
			}

			var text = " ";

			//array of unique words 
			var unique  = [];
		

			// this loop filters the array with all the words and adds elements that are unique in the array unique
			for (i= 0; i < arr.length ; i++){
				var exist = false;
				for (j = 0 ; j < unique.length; j++) {	
					if (arr[i] == unique[j]) {
						exist = true ;
					}
				} 
				if (exist == false) {
					unique.push(arr[i]);
				}
				
			}
			
			//count is an array that counts the occurences of every unique element
			var count = []; 
			count.length = unique.length;

			//counts how many times each unique element occurs in the entire text
			for (i =0; i < unique.length; i++){
				count[i] = 0;
				for (j = 0 ; j < arr.length; j++) {	
					if (arr[j] == unique[i]) {
						count[i] += 1;
					}
				}
			}

			//num_uniques is the number of unique words from the text input
			var num_uniques = unique.length;
			var i = num_uniques - 1;

			//outputs all the unique words that occur more than the maximum frequency into a table
			while(num_uniques > 0 && i > -1) {
				var word = unique.pop();
				var num = count[i];

				if (num > max_freq) {
					$('table').append( "<tr> \ <td>"+ word + "</td> \ <td>" + num +"</td></tr>"); 
				}
				i--;
			}

			//updates the word_list to include all the words above
			document.getElementById("words_list").innerHTML = text; 
		});
		

	</script>
	</body>
</html> 